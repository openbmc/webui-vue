{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a167413c_7ec3f995",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-09-21T16:29:05Z",
      "side": 1,
      "message": "Are you planning on doing this for a bunch more operations? Really would prefer a solution in bmcweb then.. If it is a few one offs, I am with this.",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0181844_f892b507",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1001314
      },
      "writtenOn": "2025-09-25T09:28:30Z",
      "side": 1,
      "message": "Can you give more info about what is the solution that can be done in the bmcweb?\nCurrently, bmcweb already gives error when we perform this operation with read-only user.\nIt is additional check in the GUI.",
      "parentUuid": "a167413c_7ec3f995",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec41c8c6_4ba6991e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1002106
      },
      "writtenOn": "2025-09-25T13:03:53Z",
      "side": 1,
      "message": "See the Privilege model in the spec: https://www.dmtf.org/sites/default/files/standards/documents/DSP0266_1.22.1.html#privilege-model\n\"A service should provide a Privilege Registry in the registry collection.\"\n\nIdeally, after logging in (or on a refresh) the webui would fetch the `PrivilegeRegistry`, when it is not available the fallback should be the list from my previous comment: /redfish/v1/AccountService/Roles.\nThe fallback mechanism should shim in a stand-in PrivilegeRegistry.\n\nThen we could implement something similar to a v-can Vue Directive, ex:\n\n```\n\u003cbutton v-can\u003d\"\u0027OperateSystems\u0027\"\u003eApply\u003c/button\u003e\n```\nreference: https://medium.com/@aimme/very-simple-way-to-manage-permissions-on-vue-js-6ecbf930c0aa\n\nYou would be able to still use a computed property (as is used in this patch) but the above pattern is preferred because using computed properties less reusable as it requires you to repeat the logic across components\n\n```\nconst canOperateSystems \u003d computed(() \u003d\u003e {\n  return Authentication.role \u003d\u003d\u003d \u0027admin\u0027;\n});\n\n// A computed property that checks if the user has a Redfish role\n// this approach is not great since there are optional Roles like\n//  \u0027SystemAdministrator\u0027 that have overlapping privs.\n//  Also OEM Roles can exist\nconst isAdmin \u003d computed(() \u003d\u003e {\n  return Authentication.RoleID \u003d\u003d\u003d \u0027Administrator\u0027;\n});\n\n// A computed property for a specific Privilege check\nconst canConfigure \u003d computed(() \u003d\u003e {\n  return Authentication.AssignedPrivileges.includes(\u0027ConfigureComponents\u0027);\n});\n```\n\nThat will get you to what you want to do here in this patch.  But looking at the Redfish spec, we could map out all operations for all resources.  Then the the v-can operation would not need to provide a parameter.",
      "parentUuid": "f0181844_f892b507",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee84b26e_e62b6cec",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1002106
      },
      "writtenOn": "2025-09-25T17:30:36Z",
      "side": 1,
      "message": "For reference I tested this reactive approach with a different project and ended up with this working:\n\n```\nimport { useSessionPrivileges } from \u0027@/api/mutator/authApi\u0027\n\n// Get reactive privileges\nconst sessionPrivileges \u003d useSessionPrivileges()\n\n// Use in template or other computed properties\nconst canConfigureComponents \u003d computed(() \u003d\u003e \n  sessionPrivileges.value.includes(\u0027ConfigureComponents\u0027)\n)\n```",
      "parentUuid": "ec41c8c6_4ba6991e",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab2411c9_47c2c869",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1001314
      },
      "writtenOn": "2025-10-29T14:21:27Z",
      "side": 1,
      "message": "Interesting, Different from the implementation in this commit. But does this require any change in the bmcweb? I don\u0027t think so. Only the UI change right.",
      "parentUuid": "ee84b26e_e62b6cec",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ab983b1_16c1cf0c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1002106
      },
      "writtenOn": "2025-10-29T16:59:07Z",
      "side": 1,
      "message": "I believe that this should not require bmcweb changes.\n\n`useSessionPrivileges()` would:\n1. grab `Roles` from the `AccountService` collection\n2. Go through each Role in the `Members` array\n3. Check if this role matches any of the current Session\u0027s Roles (Session should be saved in place of setSessionPrivilege() used today.. )\n4. Add all AssignedPrivileges from this role\n\nThis lookup should only be done once, as useSessionPrivileges() should be reactive",
      "parentUuid": "ab2411c9_47c2c869",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "929c338c_85a9856b",
        "filename": "src/store/modules/GlobalStore.js",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2025-09-21T16:29:05Z",
      "side": 1,
      "message": "Rebase since https://gerrit.openbmc.org/c/openbmc/webui-vue/+/82965/4/src/store/modules/GlobalStore.js already added this?",
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee8a6392_8f9db521",
        "filename": "src/store/modules/GlobalStore.js",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1002106
      },
      "writtenOn": "2025-09-21T17:00:35Z",
      "side": 1,
      "message": "A Redfish-first approach would be to grab the list from /redfish/v1/AccountService/Roles instead, a natural place to put the call is the UserManagementStore.",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 14,
        "endChar": 2
      },
      "revId": "c9afd0f151d3bcbba20a98b25d08c954e99bda32",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}