{
  "comments": [
    {
      "key": {
        "uuid": "fdf63a0b_3d7dd5f6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2021-07-21T18:13:44Z",
      "side": 1,
      "message": "spelling and we follow https://chris.beams.io/posts/git-commit/ for commit msgs Can you wrap the body at 72 chars? \n\n7 commit msg rules: \n    Separate subject from body with a blank line\n    Limit the subject line to 50 characters\n    Capitalize the subject line\n    Do not end the subject line with a period\n    Use the imperative mood in the subject line\n    Wrap the body at 72 characters\n    Use the body to explain what and why vs. how",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 9
      },
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4fb4a99_10e30741",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000020
      },
      "writtenOn": "2021-07-21T19:59:26Z",
      "side": 1,
      "message": "How do we know the first one has the PowerControl?",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fab0685c_5a7a1b48",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000281
      },
      "writtenOn": "2021-07-22T14:52:02Z",
      "side": 1,
      "message": "We have determined that this will cause issues on systems. We need to be able to target the right item in the Chassis collection. We won\u0027t be able to count on the first item unfortunately.",
      "parentUuid": "a4fb4a99_10e30741",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afc8ef9a_68ecd744",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000044
      },
      "writtenOn": "2021-08-09T08:09:53Z",
      "side": 1,
      "message": "For most of the systems in current openbmc, there is only one chassis in the collection, so it works in most cases.\nI tested this on meta-g220a and it works as expected, so +1.\n\nBut if there is a better way here, please update it.",
      "parentUuid": "fab0685c_5a7a1b48",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d341c09_f43d375c",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000281
      },
      "writtenOn": "2021-08-09T12:17:15Z",
      "side": 1,
      "message": "As we start down this path of optimizing for most systems, we might benefit from discussions for the criteria for upstream and downstream work. If this moves forward, it will break any system with more than one chassis. It breaks the systems we are are working on now.\n\nIn this case, we don\u0027t have any hypermedia to help determine the correct chassis to target. It might be good to have further conversation, either in discord or an upcoming GUI Design Working Group meeting.",
      "parentUuid": "afc8ef9a_68ecd744",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86ed6ef9_0d95033d",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000044
      },
      "writtenOn": "2021-08-10T08:04:19Z",
      "side": 1,
      "message": "I agree.\nBut be noted that without this patch, the code is already broken on systems that do not use \"chassis\" as the chassis id, e.g. on most systems using entity-manager.\n\nSo from my point of view, the patch is better than keeping the current broken code.",
      "parentUuid": "9d341c09_f43d375c",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6088deb1_db1f8509",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000281
      },
      "writtenOn": "2021-08-10T11:31:38Z",
      "side": 1,
      "message": "\u003e So from my point of view, the patch is better than keeping the current broken code.\n\nThat\u0027s where the issue begins. This breaks us, so we need to find a solution that isn\u0027t broken for anyone. Others have requested that we do not move this forward just by selecting the first. This was a topic on discord yesterday and the suggestion, since their is no support for filter or expand, we would need to make a call for every Chassis member and determine the type to determine which to use.",
      "parentUuid": "86ed6ef9_0d95033d",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d3bdf11_a4e32249",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-08-11T16:19:39Z",
      "side": 1,
      "message": "How do you know that \"chassis\" is the \"right\" item in the old code?  Per the redfish spec, that\u0027s an opaque identifier that shouldn\u0027t be relied on in the way this code does.  In theory, the UI should be walking the tree, determining which entities provide chassis reset resources (which right now is all of them) and provide individual buttons for it.\n\n\u003e If this moves forward, it will break any system with more than one chassis. It breaks the systems we are are working on now.\n\nGiven that the backend code in bmcweb isn\u0027t chassis-specific today (ie, any chassis resource can reset the whole chassis) is this actually wrong functionally? (aside from being wrong in the API, which this patchset already was before)\n\n\nI pointed this out in the bug, but I\u0027ll point this out here too;  We need to build a helper function for reading in portions of the Redfish tree that enforces some of these rules, otherwise we\u0027re constantly going to be going down this path where one handler hardcodes in specific system assumptions (in this case the Power node, which I agree is less important).  IMO, we should be using Redpath, as it\u0027s had a lot more design put into it by DMTF maintainers than any of us here have done, and should be relatively easy to replicate in javascript.",
      "parentUuid": "fab0685c_5a7a1b48",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "368907a0_d41baae8",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000396
      },
      "writtenOn": "2021-08-13T19:27:55Z",
      "side": 1,
      "message": "\u003e Given that the backend code in bmcweb isn\u0027t chassis-specific today (ie, any chassis resource can reset the whole chassis) is this actually wrong functionally? (aside from being wrong in the API, which this patchset already was before)\n\nThat makes sense, thanks for sharing this. I tested it out and saw if I changed the power limit on `chassis` it changed it on all the chassis\u0027. So getting the power limit from the first chassis in the collection would work regardless of how many chassis there are because they will all be the same value (same for patching)\n\nWould something like this work for walking the redfish paths? https://gist.github.com/dixsie/bec184c448bae501c6181741920fe454",
      "parentUuid": "8d3bdf11_a4e32249",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc6609ea_16df4e90",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-08-27T19:25:47Z",
      "side": 1,
      "message": "That looks a lot better;  Not what I was thinking with Redpath, but that\u0027s fine.\n\nIt still has bugs:\nOn line 52 it assumes two different indexes.  Any time you\u0027re writing object.{redfish key name} or object[{hardcoded index}] you\u0027re probably doing it incorrectly.  Most keys are optional, and if you\u0027re free to assume a single item in a collection, the spec wouldn\u0027t have used a collection. \nAll over, it assumes that properties must exist that are optional in the spec, and doesn\u0027t seem to handle \"errors\" where the path doesn\u0027t exist.  Ie, there are systems that don\u0027t support power limits;  that code doesn\u0027t seem to handle that, and looks like it will just crash.",
      "parentUuid": "368907a0_d41baae8",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db8b1dc8_a7c6d576",
        "filename": "src/store/modules/Control/PowerControlStore.js",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000276
      },
      "writtenOn": "2021-08-30T20:10:23Z",
      "side": 1,
      "message": "This is a temporary workaround for errors that we see because of the hardcoded chassis name.  My understanding is the full non-hardcoded solution is being developed separately.\n\nSome alternatives to this that we have considered are to replace all the harcoded chassis names with our local name in a downstream patch.  I also wonder if we could replace the hardcoded chassis names with a variable that we can override?\n\nI don\u0027t know if either of those are preferable to this change as a workaround while the full solution is WIP.  We\u0027re open to suggestions on the best short-term path forward.  Thanks!",
      "parentUuid": "dc6609ea_16df4e90",
      "revId": "3a371bf4384e3ed9fb0cc10a0b2ab51de7f84a39",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}